---
title: Backup and Restore
description: Backup and Restore your Okteto instance
id: backup
sidebar_label: Backup and Restore
---

This guide outlines the steps to recover an Okteto instance in the event of an unexpected failure and for disaster recovery preparedness.

## Okteto Metadata

The most important resources to backup so you can effectively recover an Okteto instance are:

- **Service Accounts**: Okteto creates a Kubernetes service account for every user that logins into Okteto. Backup all the service accounts in the `okteto` namespace with the label `dev.okteto.com: "true"`.
- **Secrets**: backup all the secrets in the `okteto` namespace. Okteto uses secrets to store Okteto Secrets, tokens, certificates, ssh keypairs, ...
- **Custom Resources**: backup Custom Resources in the `okteto` namespace corresponding to the Okteto's CRDs. Okteto CRDs can be identified with the label `app.kubernetes.io/part-of: okteto`. Okteto uses CRDs to store your Catalog, Container Registry Credentials, ...

We recommend to backup these resources every 24h.

## Recovery Process

You can follow two different recovery processes:

- **Okteto Metadata recovery processes**: recovers all the users’ metadata, tokens, secrets and custom resources. It doesn’t recover users’ namespaces, preview environments and volumes.
- **Okteto Metadata and Users' Namespaces recovery processes**: recovers not only the Okteto metadata, but also all the users’ namespaces, preview environments, and volumes.

Since namespaces are ephemeral in Okteto, we ecommend the first option and let your developers recreate their namespaces as needed.

### Okteto Metadata Recovery Process

This is the fastest and easiest recovery process.
If you do not wish to restore users’ namespaces and their application data, restoring the [Okteto Metadata](self-hosted/install/backup-restore.mdx/#okteto-metadata) is enough:

- Backup the [Okteto Metadata](self-hosted/install/backup-restore.mdx/#okteto-metadata) in your `okteto` namespace.
- Create a new cluster
- Reinstall Okteto: reinstall the Okteto Helm chart with the same configuration as your previous Okteto instance in the new cluster.
- Restore the [Okteto Metadata](self-hosted/install/backup-restore.mdx/#okteto-metadata) in the `okteto` namespace of the new cluster.
- Switch DNS: the Ingress-Nginx service in the new cluster will have a new load balancer. Configure your DNS settings to point to the IP of this new load balancer.
- Delete the broken cluster: once the restore work is complete and it has been verified that the new cluster is functioning correctly, proceed to delete the old one.

### Users and Namespaces Recovery

This option is slower and requires the usage of external tools to backup all your namespaces:

- Backup users' namespaces: you can use a tool like [Velero](https://velero.io/) to backup your users’ namespaces. All these namespaces have the label `dev.okteto.com: "true"`.
- Backup the [Okteto Metadata](self-hosted/install/backup-restore.mdx/#okteto-metadata) in your `okteto` namespace.
- Create a new cluster
- Restore users' namespaces: you can use a tool like [Velero](https://velero.io/) to restore users’s namespaces in the new cluster before reinstalling Okteto.
- Reinstall Okteto: reinstall the Okteto Helm chart with the same configuration as your previous Okteto instance in the new cluster.
- Restore the [Okteto Metadata](self-hosted/install/backup-restore.mdx/#okteto-metadata) in the `okteto` namespace of the new cluster.
- Switch DNS: the Ingress-Nginx service in the new cluster will have a new load balancer. Configure your DNS settings to point to the IP of this new load balancer.
- Delete the broken cluster: once the restore work is complete and it has been verified that the new cluster is functioning correctly, proceed to delete the old one.

> Keep in mind that private registry configurations are not reestablished until the Helm chart is reinstalled. This may temporarily affect the ability of certain pods to pull images from the Okteto Registry.
