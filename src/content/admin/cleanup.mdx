---
title: Resource Cleanup
description: Okteto saves resources by putting to sleep idle applications and cleaning up unused namespaces.
sidebar_label: Resource Cleanup
id: cleanup
---

import Image from "@theme/Image";
import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import TiersList from "@theme/TiersList";

## Sleeping Resources

To automatically save resources in your cluster, you can configure Okteto to automatically scale inactive applications and resources to zero if they haven't been used for longer than the `inactivity` period.
Learn how to configure this in the [configuration steps](#configuration-steps-).

Additionally, Namespaces can be manually scaled to zero by navigating to Admin -> Namespaces and clicking on the three dots on the right side of the Namespace that you wish to sleep.
<p align="left">
  <Image
    src={require("@site/static/img/cleanup-namespace-sleep.jpg").default}
    alt="wake a sleeping resource"
    width="1000"
  />
</p>

## Inactive Applications and Resources

Okteto considers an application or resources inactive if a user hasn't performed any of the following tasks during the `inactivity` period:

- Upgrade or redeploy via the UI or the command line
- Launched a development container with `okteto up`
- Deploy the latest version of your code with `okteto deploy`

Service accounts, config maps, secrets, or volumes you create will be unaffected by this operation.

## Events That Prevent or Wake Resources from Sleep

The following events will either reset the inactivity counter or wake a sleeping namespace:

- Deploying a Kubernetes Deployment or StatefulSet with `kubectl` or similar tools
- Running `okteto deploy`
- Running `okteto up`
- Maintaining an active `okteto up` session. If the `upSessionByLastSyncedFile` setting is enabled, this only counts if files are actively being synced (based on the last synced file)

Additionally, if you are using the Okteto Nginx Ingress Controller, incoming requests will automatically wake a sleeping namespace.
However, note that these incoming requests do not count as activity to reset the inactivity counter and keep the namespace awake.
The auto-wake behavior for incoming requests can also be disabled by [configuring the `autowake` field](self-hosted/helm-configuration.mdx#autowake).

### Manually Wake Sleeping Resources

Okteto's UI will notify you when there are sleeping resources in your namespace. Press the **Wake all** button to activate all sleeping resources at once.

<p align="left">
  <Image
    src={require("@site/static/img/wake.png").default}
    alt="wake a sleeping resource"
    width="1000"
  />
</p>


## Delete Unused Namespaces

Namespaces and all the resources and data contained within will be deleted if they are not used for longer than the `deletion` period. 

This only affects [Non-Personal Namespaces](core/namespaces.mdx), Personal Namespaces are not automatically deleted when idle.

## Persistent resources <TiersList tiers="Scale Enterprise Self-Hosted" />

In case you are interested on the garbage collector but you want to skip some specific namespace, you can mark it as `persistent`. To do so, you can add the label `dev.okteto.com/persistent` to it or [use the admin view](admin/dashboard.mdx#namespaces).

In case you want more granularity and only want to persist specific deployments or statefulsets within a namespace, you can include the label `dev.okteto.com/persistent` on those resources. In that case, the garbage collector will ignore only those specific resources while scaling down the rest of the namespace.

## Configuration Steps <TiersList tiers="Scale Enterprise Self-Hosted" />

You can consult the `deletion` and `inactivity` periods in the [Admin Dashboard](admin/dashboard.mdx).

<Tabs
  defaultValue="self-hosted"
  values={[
    { label: 'Self-Hosted', value: 'self-hosted', },
    { label: 'SaaS', value: 'saas', },
  ]}
>
<TabItem value="self-hosted">

You can enable and customize the `inactivity` and `deletion` periods via the [garbage collector's settings](self-hosted/helm-configuration.mdx#gc).

</TabItem>

<TabItem value="saas">

If your instance is hosted by Okteto, [reach out to support](https://okteto.com/support) to modify this configuration.

</TabItem>
</Tabs>
