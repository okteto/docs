---
title: Okteto Insights
description: This page provides information about Okteto Insights feature.
sidebar_label: Okteto Insights
id: okteto-insights
---

Okteto inherently generates a lot of data from developers using the platform. This includes product usage and behavior data (i.e. developer activities) as well as infrastructure utilization and performance data (i.e. infrastructure and platform activities).

Okteto Insights makes this data available to `admin` users via API endpoints that can be scraped using Prometheus. This provides a way for Okteto administrators to obtain and consume this data programmatically.

This feature is `disabled` by default. To `enable` it you need to set the helm setting [`insights.enabled`](self-hosted/helm-configuration.mdx#insights) to `true` and upgrade your Okteto instance. If you are an Okteto SaaS user, please reach out to your support contact to turn this feature on.

## How to consume Okteto Insights data

Once you enable the feature, Okteto will create a new endpoint accessible through `https://okteto.SUBDOMAIN/metrics` where data will be available in Prometheus format. This new endpoint is protected with a bearer token which is auto-generated by Okteto. Alternatively, you can specify your own token using the secret defined in this [helm setting](self-hosted/helm-configuration.mdx#insights).

To retrieve your Insights bearer token from the Okteto Admin UI, navigate to `Admin` -> `General` and scroll to the `Settings` section. You can copy your bearer token by clicking on the `Show Insights Token` button in the Insights panel.

Next you'll need to configure a scraper to connect to this endpoint using the proper token. An example of a Prometheus scraper configuration is:

```yaml
- job_name: "okteto_scrapper"
  scrape_interval: 5m

  scheme: http
  static_configs:
    - targets: ["okteto.<SUBDOMAIN>:443"] # replace <SUBDOMAIN> with your Okteto subdomain
  authorization:
    type: Bearer
    credentials: <bearer-token> # replace <bearer-token> with the token generated by Okteto
```

:::caution
Okteto does **not** provide a Prometheus instance or storage for this data. You must deploy your own Prometheus instance (or other collector platform) to consume this data and manage counters and metrics restart with the functions Prometheus provides.
:::

## What data is available

:::note
All metrics provided by Okteto will have the prefix `okteto_`
:::

Okteto will progressively make more data available through this endpoint. The following metrics are available today:

### Node Metrics

- `okteto_system_node`: This metric is a [gauge](https://prometheus.io/docs/concepts/metric_types/#gauge) which represents the number of nodes running Okteto. This metric does not have any labels.
- `okteto_system_node_memory_bytes`: This metric is a [gauge](https://prometheus.io/docs/concepts/metric_types/#gauge) which represents the total memory (in bytes) available for allocating to a node. It has the following labels:
  - `node_name`: It contains the node name.
- `okteto_system_node_memory_requested_bytes`: This metric is a [gauge](https://prometheus.io/docs/concepts/metric_types/#gauge) which represents the total memory (in bytes) [requested](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/) for a node. It has the following labels:
  - `node_name`: It contains the node name.
- `okteto_system_node_memory_usage_bytes`: This metric is a [gauge](https://prometheus.io/docs/concepts/metric_types/#gauge) which represents the total memory (in bytes) in use for a node. It has the following labels:
  - `node_name`: It contains the node name.
- `okteto_system_node_cpu_cores`: This metric is a [gauge](https://prometheus.io/docs/concepts/metric_types/#gauge) which represents the total CPU cores available for allocating to a node. It has the following labels:
  - `node_name`: It contains the node name.
- `okteto_system_node_cpu_requested_cores`: This metric is a [gauge](https://prometheus.io/docs/concepts/metric_types/#gauge) which represents the total CPU cores [requested](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/) for a node. It has the following labels:
  - `node_name`: It contains the node name.
- `okteto_system_node_cpu_usage_cores`: This metric is a [gauge](https://prometheus.io/docs/concepts/metric_types/#gauge) which represents the total CPU cores in use for a node. It has the following labels:
  - `node_name`: It contains the node name.

### Pod Metrics

- `okteto_system_pod_container_cpu_requests_cores`: This metric is a [gauge](https://prometheus.io/docs/concepts/metric_types/#gauge) which represents the total CPU [requested](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/) of a pod and standard container at that point in time. It has the following labels:
  - `container_name`: It contains the name of the container being represented.
  - `pod_name`: It contains the name of the pod being represented.
  - `namespace`: It contains the namespace name.
  - `node_name`: It contains the node name.
  - `devenv_name`: If defined, it represents the name of the deployed development environment it is linked to.
  - `pod_type`: It determines if the pod is in development mode or not, values can be `development` or `standard`.
  - `controller_type`: It represents the type of the top controller that created the pod, values can be `deployment` or `statefulset`.
  - `controller_name`: It contains the name of the top controller that created the pod.
- `okteto_system_pod_container_cpu_limits_cores`: This metric is a [gauge](https://prometheus.io/docs/concepts/metric_types/#gauge) which represents the CPU limits of a specific pod and standard container at that point in time. It has the following labels:
  - `container_name`: It contains the name of the container being represented.
  - `pod_name`: It contains the name of the pod being represented.
  - `namespace`: It contains the namespace name.
  - `node_name`: It contains the node name.
  - `devenv_name`: If defined, it represents the name of the deployed development environment it is linked to.
  - `pod_type`: It determines if the pod is in development mode or not, values can be `development` or `standard`.
  - `controller_type`: It represents the type of the top controller that created the pod, values can be `deployment` or `statefulset`.
  - `controller_name`: It contains the name of the top controller that created the pod.
- `okteto_system_pod_init_container_cpu_requests_cores`: This metric is a [gauge](https://prometheus.io/docs/concepts/metric_types/#gauge) which represents the CPU requests of a specific pod and init container at that point in time. It has the following labels:
  - `container_name`: It contains the name of the container being represented.
  - `pod_name`: It contains the name of the pod being represented.
  - `namespace`: It contains the namespace name.
  - `node_name`: It contains the node name.
  - `devenv_name`: If defined, it represents the name of the deployed development environment it is linked to.
  - `pod_type`: It determines if the pod is in development mode or not, values can be `development` or `standard`.
  - `controller_type`: It represents the type of the top controller that created the pod, values can be `deployment` or `statefulset`.
  - `controller_name`: It contains the name of the top controller that created the pod.
- `okteto_system_pod_init_container_cpu_limits_cores`: This metric is a [gauge](https://prometheus.io/docs/concepts/metric_types/#gauge) which represents the CPU limits of a specific pod and init container at that point in time. It has the following labels:
  - `container_name`: It contains the name of the container being represented.
  - `pod_name`: It contains the name of the pod being represented.
  - `namespace`: It contains the namespace name.
  - `node_name`: It contains the node name.
  - `devenv_name`: If defined, it represents the name of the deployed development environment it is linked to.
  - `pod_type`: It determines if the pod is in development mode or not, values can be `development` or `standard`.
  - `controller_type`: It represents the type of the top controller that created the pod, values can be `deployment` or `statefulset`.
  - `controller_name`: It contains the name of the top controller that created the pod.
- `okteto_system_pod_container_cpu_usage_cores`: This metric is a [gauge](https://prometheus.io/docs/concepts/metric_types/#gauge) which represents the CPU usage of a specific pod and standard container at that point in time. It has the following labels:
  - `container_name`: It contains the name of the container being represented.
  - `pod_name`: It contains the name of the pod being represented.
  - `namespace`: It contains the namespace name.
  - `node_name`: It contains the node name.
  - `devenv_name`: If defined, it represents the name of the deployed development environment it is linked to.
  - `pod_type`: It determines if the pod is in development mode or not, values can be `development` or `standard`.
  - `controller_type`: It represents the type of the top controller that created the pod, values can be `deployment` or `statefulset`.
  - `controller_name`: It contains the name of the top controller that created the pod.
- `okteto_system_pod_container_memory_requests_bytes`: This metric is a [gauge](https://prometheus.io/docs/concepts/metric_types/#gauge) which represents the memory [requested](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/) for a specific pod and standard container at that point in time. It has the following labels:
  - `container_name`: It contains the name of the container being represented.
  - `pod_name`: It contains the name of the pod being represented.
  - `namespace`: It contains the namespace name.
  - `node_name`: It contains the node name.
  - `devenv_name`: If defined, it represents the name of the deployed development environment it is linked to.
  - `pod_type`: It determines if the pod is in development mode or not, values can be `development` or `standard`.
  - `controller_type`: It represents the type of the top controller that created the pod, values can be `deployment` or `statefulset`.
  - `controller_name`: It contains the name of the top controller that created the pod.
- `okteto_system_pod_container_memory_limits_bytes`: This metric is a [gauge](https://prometheus.io/docs/concepts/metric_types/#gauge) which represents the memory limits for a specific pod and standard container at that point in time. It has the following labels:
  - `container_name`: It contains the name of the container being represented.
  - `pod_name`: It contains the name of the pod being represented.
  - `namespace`: It contains the namespace name.
  - `node_name`: It contains the node name.
  - `devenv_name`: If defined, it represents the name of the deployed development environment it is linked to.
  - `pod_type`: It determines if the pod is in development mode or not, values can be `development` or `standard`.
  - `controller_type`: It represents the type of the top controller that created the pod, values can be `deployment` or `statefulset`.
  - `controller_name`: It contains the name of the top controller that created the pod.
- `okteto_system_pod_init_container_memory_requests_bytes`: This metric is a [gauge](https://prometheus.io/docs/concepts/metric_types/#gauge) which represents the memory [requested](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/) for a specific pod and init container at that point in time. It has the following labels:
  - `container_name`: It contains the name of the container being represented.
  - `pod_name`: It contains the name of the pod being represented.
  - `namespace`: It contains the namespace name.
  - `node_name`: It contains the node name.
  - `devenv_name`: If defined, it represents the name of the deployed development environment it is linked to.
  - `pod_type`: It determines if the pod is in development mode or not, values can be `development` or `standard`.
  - `controller_type`: It represents the type of the top controller that created the pod, values can be `deployment` or `statefulset`.
  - `controller_name`: It contains the name of the top controller that created the pod.
- `okteto_system_pod_init_container_memory_limits_bytes`: This metric is a [gauge](https://prometheus.io/docs/concepts/metric_types/#gauge) which represents the memory limits for a specific pod and init container at that point in time. It has the following labels:
  - `container_name`: It contains the name of the container being represented.
  - `pod_name`: It contains the name of the pod being represented.
  - `namespace`: It contains the namespace name.
  - `node_name`: It contains the node name.
  - `devenv_name`: If defined, it represents the name of the deployed development environment it is linked to.
  - `pod_type`: It determines if the pod is in development mode or not, values can be `development` or `standard`.
  - `controller_type`: It represents the type of the top controller that created the pod, values can be `deployment` or `statefulset`.
  - `controller_name`: It contains the name of the top controller that created the pod.
- `okteto_system_pod_container_memory_usage_bytes`: This metric is a [gauge](https://prometheus.io/docs/concepts/metric_types/#gauge) which represents the memory usage of a specific pod and standard container at that point in time. It has the following labels:
  - `container_name`: It contains the name of the container being represented.
  - `pod_name`: It contains the name of the pod being represented.
  - `namespace`: It contains the namespace name.
  - `node_name`: It contains the node name.
  - `devenv_name`: If defined, it represents the name of the deployed development environment it is linked to.
  - `pod_type`: It determines if the pod is in development mode or not, values can be `development` or `standard`.
  - `controller_type`: It represents the type of the top controller that created the pod, values can be `deployment` or `statefulset`.
  - `controller_name`: It contains the name of the top controller that created the pod.

### Build Metrics

:::note
Only successful builds are tracked with `okteto_usage_build_duration_seconds`.
:::

- `okteto_usage_build_duration_seconds`: This metric is a [histogram](https://prometheus.io/docs/practices/histograms/) which represent metrics related to build times of the images that are being built within Okteto. Currently this will only show builds that have successfully completed. It has the following labels:
  - `devenv_name`: If defined, it represents the name of the deployed development environment it is linked to.
  - `image_name`: It represents the name of the image to be built as it appears in the Okteto Manifest
  - `namespace`: The okteto cli context from where the request originated
  - `repository`: The git repository where the okteto manifest that defines this image is hosted

- `okteto_usage_build_result`: This metric is a [counter](https://prometheus.io/docs/concepts/metric_types/#counter) which represent metrics related to the result of the builds that are being built within Okteto. It has the following labels:
  - `devenv_name`: If defined, it represents the name of the deployed development environment it is linked to.
  - `image_name`: It represents the name of the image to be built as it appears in the Okteto Manifest
  - `namespace`: The okteto cli context from where the request originated
  - `repository`: The git repository where the okteto manifest that defines this image is hosted
  - `result`: `success` or `failed` represent the status of the image

### Deploy Metrics

:::note
Only successful deployments are tracked with `okteto_usage_deploy_duration_seconds`.
:::

- `okteto_usage_deploy_duration_seconds`: This metric is a [histogram](https://prometheus.io/docs/practices/histograms/) which represent metrics related to the time it takes to deploy a development environment. Currently this will only show deployments that have successfully completed. It has the following labels:
  - `devenv_name`: It represents the name of the deployed development environment.
  - `namespace`: The okteto cli context from where the request originated
  - `repository`: The git repository where the okteto manifest that defines this development environment is hosted
  - `command_index`: It represents the index from the list of commands in the okteto manifest.

- `okteto_usage_deploy_result`: This metric is a [counter](https://prometheus.io/docs/concepts/metric_types/#counter) which represent metrics related to the result of the deployment of a development environment. It has the following labels:
  - `devenv_name`: It represents the name of the deployed development environment.
  - `namespace`: The okteto cli context from where the request originated
  - `repository`: The git repository where the okteto manifest that defines this development environment is hosted
  - `result`: `success` or `failed` represent the status of the deployment

### Namespace Metrics

- `okteto_system_namespace_status_condition`: This metric is a [gauge](https://prometheus.io/docs/concepts/metric_types/#gauge) which represents the status of a namespace. Preview namespaces are not included here. It has the following labels:
  - `namespace`: It contains the namespace name.
  - `condition`: It represents the condition of the namespace, values can be `active` or `sleeping`.
- `okteto_system_namespace_created_time`: This metric is a [gauge](https://prometheus.io/docs/concepts/metric_types/#gauge) which represents the creation time of a namespace. It has the following labels:
  - `namespace`: It contains the namespace name.

### Preview Metrics

- `okteto_system_preview_status_condition`: This metric is a [gauge](https://prometheus.io/docs/concepts/metric_types/#gauge) which represents the status of a preview. It has the following labels:
  - `namespace`: It contains the namespace name.
  - `condition`: It represents the condition of the preview, values can be `active` or `sleeping`.
- `okteto_system_preview_created_time`: This metric is a [gauge](https://prometheus.io/docs/concepts/metric_types/#gauge) which represents the creation time of a preview. It has the following labels:
  - `namespace`: It contains the namespace name.

### User Metrics

- `okteto_system_user_last_seen_time`: This metric is a [gauge](https://prometheus.io/docs/concepts/metric_types/#gauge) which represents the last activity of a user. It has the following labels:
  - `id`: It contains the user id.
  - `externalid`: It contains the external id of the user.
