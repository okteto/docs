---
title: Okteto Manifest
description: An overview of the Okteto Manifest and its core features.
sidebar_label: Overview
id: overview-manifest
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

The Okteto manifest is how you configure the behavior for building, deploying, and developing your application in an Okteto development environment. If you already have a Docker Compose file for your application, then the Okteto manifest is optional. 

There are five sections of the Okteto manifest that define how your development environments and containers behave.

| Section | Description | Reference |
| ------- | ----------- | --------- |
| build | Configure a list of images to build for your application's development environment. | [Learn more](reference/okteto-manifest.mdx#build-object-optional) |
| deploy | Configure a list of commands to execute within the development environment to deploy your application. | [Learn more](reference/okteto-manifest.mdx#deploy-string-optional) |
| destroy | Configure a list of commands to destroy all resources created in the `deploy` and `external` sections. | [Learn more](reference/okteto-manifest.mdx#destroy-string-optional) |
| dev | Configure a list of development containers and their behavior to define how `okteto up` works when you start working on a specific, configured service in your development environment. | [Learn more](reference/okteto-manifest.mdx#dev-object-optional) |
| external | Configure a list of external resources used by your application's development environment. These are resources that exist outside of the Okteto cluster (e.g. cloud resources, dashboards). | [Learn more](reference/okteto-manifest.mdx#external-object-optional). |

There are other sections to help you build your ideal development experience in Okteto, but this document focuses solely on configuring your Okteto manifest to build and deploy your development environments using the three most common sections: `build`, `deploy`, and `dev`. You can learn more about the other Okteto manifest options in the [manifest reference](reference/okteto-manifest.mdx).

### Sample Okteto Manifest

The following manifest example is from our demo [movies repo](https://github.com/okteto/movies) if you'd like to explore further. It has been pared down for brevity and contains only the `build`, `deploy`, and `dev` sections. 

We'll explain each section, including the `destroy` and `external` sections, in other pages of our documentation.

```yaml
icon: https://apps.okteto.com/movies/icon.png

build:
    frontend:
        context: frontend
    frontend-dev:
        context: frontend
        target: dev
    catalog:
        context: catalog
    api:
        context: api

deploy:
    - name: Deploy Frontend
        command: helm upgrade --install frontend frontend/chart --set image=${OKTETO_BUILD_FRONTEND_IMAGE}
    - name: Deploy Catalog
        command: helm upgrade --install catalog catalog/chart --set image=${OKTETO_BUILD_CATALOG_IMAGE}
    - name: Deploy API
        command: helm upgrade --install api api/chart --set image=${OKTETO_BUILD_API_IMAGE} --set load=${API_LOAD_DATA:-true}

dev:
    frontend:
        image: ${OKTETO_BUILD_FRONTEND_DEV_IMAGE}
        command: bash
        sync:
        - frontend:/usr/src/app
    catalog:
        command: yarn start
        sync:
        - catalog:/src
        forward:
        - 9229:9229
    api:
        image: ${OKTETO_BUILD_API_DEV_IMAGE}
        command: bash
        securityContext:
        capabilities:
            add:
            - SYS_PTRACE
        sync:
        - api:/usr/src/app
        forward:
        - 2346:2345
```
### Using the Okteto CLI

When using this manifest Okteto will create a development environment with each of the services or components listed in the configuration. When you start working on any of these services you'll use the `okteto up` command. When issuing this command, you'll be presented with terminal output that looks like this:

```console
Using your_user_name @ example.yourdomain.dev as context
'Movies App' was already deployed. To redeploy run 'okteto deploy' or 'okteto up --deploy'
Select which development container to activate:
Use the arrow keys to navigate: ↓ ↑ → ← 
  ▸ api
    catalog
    frontend
```

This example [builds](reference/okteto-manifest.mdx/#build-object-optional) the container image of the **api** microservice, [deploys](reference/okteto-manifest.mdx/#deploy-object-optional) the application using its helm chart, and creates a [dev](reference/okteto-manifest.mdx/#dev-object-optional) container for the **api** microservice that can be synchronized with your local filesystem on the container path `/usr/src/app`.

### Environment Variables

The Okteto manifest also uses environment variables and each section supports specific ENV VARs. We are regularly adding additional ENV VARs but for now it's most important to know which ones exist and how and where to use them. There are three types of ENV VARs to know about today:

#### Default Environment Variables

The following environment variables are automatically populated to be referred in your Okteto Manifest or deploy/destroy commands:
- `OKTETO_DOMAIN`: the domain where Okteto exposes your application endpoints.
- `OKTETO_NAMESPACE`: the namespace where your application is going to be installed.
- `OKTETO_USERNAME`: your username in Okteto.
- `OKTETO_REGISTRY_URL`: the url of the [Okteto Registry](core/components/container-registry.mdx).
- `OKTETO_GIT_BRANCH`: the name of the Git branch currently being deployed.
- `OKTETO_GIT_COMMIT`: the SHA1 hash of the last commit of the branch.

#### Built-in Environment Variables for Images stored in the Okteto Registry

You can refer to the images defined in the [build](reference/okteto-manifest.mdx/#build-object-optional) section of the Okteto Manifest using the following environment variables:
- `OKTETO_BUILD_<image>_IMAGE`: the full image reference
- `OKTETO_BUILD_<image>_REGISTRY`: the registry URL where the image was pushed
- `OKTETO_BUILD_<image>_REPOSITORY`: the name of the image that was pushed
- `OKTETO_BUILD_<image>_SHA`: The latest tag and the SHA of the image

For example, for the following `build` section:

```yaml
build:
  hello-world:
    context: .
```

Okteto will build a random image tag like `registry.okteto.example.com/cindy/hello-world:f56119a37b`, and you would have the following environment variables available:

- `OKTETO_BUILD_HELLO_WORLD_IMAGE`: registry.okteto.example.com/cindy/hello-world@sha256:xxx
- `OKTETO_BUILD_HELLO_WORLD_REGISTRY`: registry.okteto.example.com
- `OKTETO_BUILD_HELLO_WORLD_REPOSITORY`: cindy/hello-world
- `OKTETO_BUILD_HELLO_WORLD_SHA`: f56119a37b@sha256:xxx

> if an `<image>` name includes the symbol `-`, in the corresponding `OKTETO_BUILD_<image>` environment variables, the symbol `-` will be replaced by `_`.  For example, if `<image>` is `name-with-hyphen`, the environment variable names will start with `$OKTETO_BUILD_NAME_WITH_HYPHEN_`.

#### Built-in Environment Variables for Dependencies

You can refer to the variables defined by your [dependencies](reference/okteto-manifest.mdx/#dependencies-object-optional) using the following environment variables:
- `OKTETO_DEPENDENCY_<dependency>_VARIABLE_<variable>`: the value of a variable of a dependency.

For example, if you have the following dependency in your Okteto Manifest:

```yaml
dependencies:
  database:
    repository: https://github.com/okteto/my-database
    variables:
      USERNAME: okteto
    wait: true
```

and the repo https://github.com/okteto/my-database has the following Okteto Manifest:

```yaml
deploy:
  - echo "PASSWORD=1234" >> $OKTETO_ENV
```

You can refer to the variables of https://github.com/okteto/my-database in the `deploy` section of your Okteto Manifest like this:

```yaml
dependencies:
  database:
    repository: https://github.com/okteto/my-database
    variables:
      USERNAME: okteto
    wait: true
deploy:
  - echo ${OKTETO_DEPENDENCY_DATABASE_VARIABLE_USERNAME}
  - echo ${OKTETO_DEPENDENCY_DATABASE_VARIABLE_PASSWORD}
```

Note that `USERNAME` has an static value, and `PASSWORD` is dynamically generated.