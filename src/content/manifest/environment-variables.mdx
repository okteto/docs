---
title: Environment variables
description: Use variables to streamline your Okteto manifest.
sidebar_label: Environment variables
id: environment-variables
---

The Okteto manifest supports the use of variables to streamline your configuration. There are a few different ways to leverage variables and it's important to understand the different behaviors. In short:

- Users can define variables
- Some variables are default, built-in to the Okteto platform
- All variables used in the Okteto manifest are automatically expanded
- Variables referenced in the `deploy` and `destroy` sections are automatically injected into those environments

We will cover each of these behaviors in more detail below.

## User-defined variables

Okteto supports manual definition of variables, offering significant flexibility in configuration. These user-defined variables are separate from Okteto's default, built-in variables. We recommend creating variables in the following order of preference:

- Local variables
- Deploy time variables
- Catalog variables
- User variables (in settings)
- Admin variables

> Note: Variables defined using methods lower in this list (e.g. admin variables) will override mentions of the same variable defined by methods higher in this list (e.g. deploy time variables)

## Configuring dynamic endpoints

In order to create dynamic, external endpoints within your Okteto environment you must add variables to `$OKTETO_ENV` within your `deploy` section. This enables you to define `$variables`, assign them to an `OKTETO_ENV_VAR`, and make those ENV VARs available in future sections (e.g. `deploy`, `destroy`) to generate dynamic endpoints for external resources. The example below is how you would add your variables to `$OKTETO_ENV` in the `deploy` section and then access those variables in a sample `destroy` section:

```yaml
deploy:
  hashicorp/terraform:1.4
  commands:
  - name: Create AWS infrastructure
    command: |
      set -e
      resourceName="${OKTETO_NAMESPACE}-oktacoshop"
      region=$AWS_REGION

      terraform apply -input=false -var "bucket_name=$resourceName" -var "queue_name=$resourceName" -var "region=$region" -auto-approve
      s3Dashboard="https://s3.console.aws.amazon.com/s3/buckets/${resourceName}"

      # ... shortened for brevity
    {
    echo "OKTETO_EXTERNAL_S3_ENDPOINTS_BUCKET_URL=$s3Dashboard"
    echo "S3_BUCKET_NAME=$resourceName"
    } >> "$OKTETO_ENV"

destroy:
  image: hashicorp/terraform:1.4
  commands:
  - name: Delete the AWS infrastructure
    command: |
      set -e
      resourceName="${OKTETO_NAMESPACE}-oktacoshop"
      region=$AWS_REGION
      
      # omitted for brevity 

      terraform apply -input=false -var "bucket_name=$resourceName" -var "queue_name=$resourceName" -var "region=$region" -auto-approve --destroy
```

### **Default Environment Variables**

These are automatically populated and can be referenced in your Okteto manifestâ€™s `deploy`/`destroy` commands:

- **`OKTETO_DOMAIN`**: The domain where Okteto exposes your application endpoints.
- **`OKTETO_NAMESPACE`**: The namespace where your application is installed.
- **`OKTETO_USERNAME`**: Your username in Okteto.
- **`OKTETO_REGISTRY_URL`**: The URL of the Okteto Registry.
- **`OKTETO_GIT_BRANCH`**: The name of the Git branch being deployed.
- **`OKTETO_GIT_COMMIT`**: The SHA1 hash of the last commit of the branch.

### **Built-in Environment Variables for Images in Okteto Registry**

Reference images defined in the `build` section of the Okteto manifest using the following environment variables:

- **`OKTETO_BUILD_<image>_IMAGE`**: Full image reference.
- **`OKTETO_BUILD_<image>_REGISTRY`**: Registry URL where the image was pushed.
- **`OKTETO_BUILD_<image>_REPOSITORY`**: Name of the image that was pushed.
- **`OKTETO_BUILD_<image>_SHA`**: Latest tag and SHA of the image.

For instance, with a build section like:

```yaml
yamlCopy code
build:
  hello-world:
    context: .
```

Okteto will generate environment variables such as:

- **`OKTETO_BUILD_HELLO_WORLD_IMAGE`**: registry.okteto.example.com/cindy/hello-world@sha256:xxx
- **`OKTETO_BUILD_HELLO_WORLD_REGISTRY`**: registry.okteto.example.com
- **`OKTETO_BUILD_HELLO_WORLD_REPOSITORY`**: cindy/hello-world
- **`OKTETO_BUILD_HELLO_WORLD_SHA`**: f56119a37b@sha256:xxx

Note: If an <image> name includes '-', it will be replaced by '_' in the corresponding environment variables.

### **Built-in Environment Variables for Dependencies:**
Reference variables defined by your dependencies using the following pattern:
    - **`OKTETO_DEPENDENCY_<dependency>_VARIABLE_<variable>`**: The value of a variable of a dependency.
    
    For example, if you have a dependency in your Okteto Manifest:
    
    ```yaml
    yamlCopy code
    dependencies:
      database:
        repository: https://github.com/okteto/my-database
        variables:
          USERNAME: okteto
        wait: true
    
    ```
    
    And the repository has this Okteto Manifest:
    
    ```yaml
    yamlCopy code
    deploy:
      - echo "PASSWORD=1234" >> $OKTETO_ENV
    
    ```
    
    Reference the variables in your Okteto Manifest deploy section like this:
    
    ```yaml
    yamlCopy code
    dependencies:
      database:
        repository: https://github.com/okteto/my-database
        variables:
          USERNAME: okteto
        wait: true
    deploy:
      - echo ${OKTETO_DEPENDENCY_DATABASE_VARIABLE_USERNAME}
      - echo ${OKTETO_DEPENDENCY_DATABASE_VARIABLE_PASSWORD}
    
    ```
    
    Note: USERNAME has a static value, and PASSWORD is dynamically generated.

## Feature flag variables

Okteto provides a list of variables that serve as feature flags for some of the features we release in our product. Below is a list of those variables that you can use to leverage these newer and experimental features:

- `OKTETO_SMART_BUILDS_ENABLED`: enables the "smart builds" feature that uses a hash of the build context to determine if an image needs to be rebuilt or can be pulled from the registry. This can accelerate build times.